<!-- エラーメッセージ -->
<% if @article.errors.any? %>
      <% @article.errors.messages.each_value do |value| %>
        <div class="row">
          <div class="col-xs-3">
            <div class="alert alert-danger"><%= value[0] %></div>
          </div>
        </div>
      <% end %>
<% end %>
<% if @category.errors.any? %>
      <% @category.errors.messages.each do |key, value| %>
        <div class="row">
          <div class="col-xs-3">
            <div class="alert alert-danger"><%= value[0] %></div>
          </div>
        </div>
      <% end %>
<% end %>

<%= form_for @article do |f| %>
    <div class="row">
      <div class="form-group">
        <div class="col-xs-7">
            <%= f.label :title, "Title" %><br>
            <%= f.text_field :title, class: "form-control"  %>
        </div>
       </div>
    </div>
    <div class="row">
      <div class="form-group">
        <div class="col-xs-7">
          <%= f.label :body, "Content" %><br>
          <%= f.text_area :body, :size => "20x20", class: "form-control" %>
        </div>
      </div>
    </div>

    <div class="field">
      <% if @article.picture? %>
          <%= image_tag @article.picture.url %>
      <% end %><br>
      <%= f.label :picture %><br>
      <%= f.file_field :picture %>
    </div>

   <div class="form-group">
     <strong>Category</strong> (カテゴリを追加したい場合は'Add Category'を選択してください)
     <span>
        <% categories_array = Category.all.map { |category| [category.name, category.id] } %>
        <% categories_array = categories_array + [["[Add Category]", 0]] %>
        <% options_for_select(categories_array) %><br/>
        <%= select_tag('selectc', options_for_select(categories_array), include_blank: true) %>
        <span id="addc" class="form-group"></span>
     </span>
   </div>

    <script>
      var selectc = document.getElementById("selectc");
      console.log(selectc.value);
      selectc.addEventListener("change", function(){
        if(selectc.value == 0){
          console.log("category added");
          document.getElementById("addc").innerHTML = "<input type='text' class='form-control col-xs-3' name='addc' autofocus placeholder='Add Here'>";
        }else{
          document.getElementById("addc").innerHTML = "";
        }
      });
    </script>


　　<div class="form-group">
      <div class="btn-group">
        <%= f.submit("Submit", class: "btn btn-primary btn-lg") %>
      </div>
   </div>
<% end %>
